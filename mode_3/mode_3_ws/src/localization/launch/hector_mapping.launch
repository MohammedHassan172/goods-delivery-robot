<?xml version="1.0"?>

<launch>
  
  <arg name="odom_frame" default="odom" />
  <arg name="poseupdate_topic_name" default="hamada"/>
  <arg name="pub_map_odom_transform" default="true"/>
  <arg name="scan_topic" default="scan"/>
  <arg name="use_tf_pose_start_estimate" default="false"/>
  <arg name="map_topic" default="scanmatcher_map" />
  <arg name="map_with_known_poses" default="false"/>


  
  <node pkg="hector_mapping" type="hector_mapping" name="hector_mapping" output="screen" respawn="true">
    
    <remap from="scan" to="$(arg scan_topic)" />
    
    <remap from="poseupdate" to="$(arg poseupdate_topic_name)"/>

    <param name="pub_odometry" value="false" />
    <param name="base_frame" value="base_link" />
    <param name="odom_frame" value="$(arg odom_frame)"/>
    <!-- <param name="map_frame" value="map" /> -->
    <param name="map_with_known_poses" value="$(arg map_with_known_poses)"/>
    
    

    <param name="output_timing" value="false"/>
    
    <param name="pub_map_odom_transform" value="$(arg pub_map_odom_transform)" />
    <param name="use_tf_scan_transformation" value="true"/>
    <param name="use_tf_pose_start_estimate" value="$(arg use_tf_pose_start_estimate)"/>

    <param name="map_pub_period" value="2.0"/>
    <param name="pub_map_scanmatch_transform" value="false"/>
    <param name="map_update_angle_thresh" value="0.1"/>

    <param name="laser_z_min_value" value = "-0.3"/>
    <!-- <param name="laser_z_max_value" value = "0.3"/> -->
    
    <param name="update_factor_free" value="0.3"/>

    <param name="map_resolution" value="0.05"/>
    <param name="map_size" value="1024"/>
    <param name="map_start_x" value="0.5"/>
    <param name="map_start_y" value="0.5"/>
    <!-- check ^ -->
    <param name="map_multi_res_levels" value="1"/>
    
    <param name="laser_min_dist" value="0.1"/> 

    <!-- <remap from="map" to="$(arg map_topic)" /> -->
  </node>

  <node pkg="hector_map_server" type="hector_map_server" name="hector_map_server" output="screen" respawn="true">
    <!-- <remap from="map" to="scanmatcher_map" /> -->
    <!-- <remap from="~/get_search_position" to="get_search_position" /> -->
  </node>

</launch>
